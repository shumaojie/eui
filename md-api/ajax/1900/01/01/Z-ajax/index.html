<p>执行Ajax请求。它可以是本地资源，或者通过支持<a href="https://developer.mozilla.org/en/http_access_control">HTTP access control</a>的浏览器 或者通过<a href="http://json-p.org">JSONP</a>来实现跨域。</p>

<p>选项:</p>

<ul>
<li><code>type</code> (默认： “GET”)：请求方法 (“GET”, “POST”,或者其他)</li>
<li><code>url</code>  (默认： 当前地址)：发送请求的地址</li>
<li><code>data</code>  (默认：none)：发送到服务器的数据；如果是GET请求，它会自动被作为参数拼接到url上。
      非String对象将通过  <a href="#$.param">$.param</a>得到序列化字符串。</li>
<li><code>processData</code> (默认： true)： 对于非Get请求。是否自动将 <code>data</code> 转换为字符串。</li>
<li><code>contentType</code> (默认： “application/x-www-form-urlencoded”)： 发送信息至服务器时内容编码类型
            (这也可以通过设置 <code>headers</code>)。通过设置 <code>false</code> 跳过设置默认值。</li>
<li><code>mimeType</code> (默认： none): 覆盖响应的MIME类型。<span class=version>v1.1+</span></li>
<li><code>dataType</code>  (默认： none)：预期服务器返回的数据类型(<code>json</code>, <code>jsonp</code>, <code>xml</code>, <code>html</code>, or <code>text</code>)</li>
<li><code>jsonp</code> (默认：“callback”): JSONP回调查询参数的名称</li>
<li><code>jsonpCallback</code> (默认： “jsonp{N}”): 全局JSONP回调函数的 字符串（或返回的一个函数）名。
            设置该项能启用浏览器的缓存。<span class=version>v1.1+</span></li>
<li><code>timeout</code>  (默认： <code>0</code>): 以毫秒为单位的请求超时时间, <code>0</code> 表示不超时。</li>
<li><code>headers</code>: Ajax请求中额外的HTTP信息头对象</li>
<li><code>async</code> (默认：true): 默认设置下，所有请求均为异步。如果需发送同步请求，请将此设置为 <code>false</code>。</li>
<li><code>global</code>  (默认：true): 请求将触发全局Ajax事件处理程序，设置为 <code>false</code> 将不会触发全局 Ajax 事件。</li>
<li><code>context</code>  (默认：window): 这个对象用于设置Ajax相关回调函数的上下文(this指向)。</li>
<li><code>traditional</code>(默认： false): 激活传统的方式通过<a href="#$.param">$.param</a>来得到序列化的 <code>data</code>。</li>
<li><code>cache</code> (默认： true): 浏览器是否应该被允许缓存GET响应。
        从<span class=version>v1.1.4</span>开始，当dataType选项为 &ldquo;script&rdquo; 或 jsonp时，默认为<code>false</code>。
<code>dataType: "script"</code> or <code>jsonp</code>.</li>
<li><code>xhrFields</code>  (默认： none): 一个对象包含的属性被逐字复制到XMLHttpRequest的实例。
<span class=version>v1.1+</span></li>
<li><code>username</code> &amp; <code>password</code>(默认： none): HTTP基本身份验证凭据。
<span class=version>v1.1+</span></li>
</ul>


<p>如果URL中含有 <code>=?</code>或者<code>dataType</code>是“jsonp”，这讲求将会通过注入一个 <code>&lt;script&gt;</code>标签来代替使用
 XMLHttpRequest (查看 <a href="http://json-p.org">JSONP</a>)。此时 <code>contentType</code>, <code>dataType</code>, <code>headers</code>有限制，<code>async</code> 不被支持。</p>

<h4>Ajax 回调函数</h4>

<p>你可以指定以下的回调函数，他们将按给定的顺序执行：</p>

<ol>
<li><p><code>beforeSend(xhr, settings)</code>: 请求发出前调用，它接收xhr对象和settings作为参数对象。
      如果它返回 <code>false</code> ，请求将被取消。</p></li>
<li><p><code>success(data, status, xhr)</code>: 请求成功之后调用。传入返回后的数据，以及包含成功代码的字符串。</p></li>
<li><p><code>error(xhr, errorType, error)</code>: 请求出错时调用。 (超时，解析错误，或者状态码不在HTTP 2xx)。</p></li>
<li><p><code>complete(xhr, status)</code>: 请求完成时调用，无论请求失败或成功。</p></li>
</ol>


<h4>Promise 回调接口 <span class=version>v1.1+</span></h4>

<p>如果可选的“callbacks” 和 “deferred” 模块被加载，从<code>$.ajax()</code>返回的XHR对象实现了promise接口链式的回调：</p>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">xhr</span><span class="p">.</span><span class="nx">done</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">status</span><span class="p">,</span> <span class="nx">xhr</span><span class="p">){</span> <span class="p">...</span> <span class="p">})</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">fail</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">xhr</span><span class="p">,</span> <span class="nx">errorType</span><span class="p">,</span> <span class="nx">error</span><span class="p">){</span> <span class="p">...</span> <span class="p">})</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">always</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span> <span class="p">...</span> <span class="p">})</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span> <span class="p">...</span> <span class="p">})</span></code></pre></div>


<p>这些方法取代了 <code>success</code>, <code>error</code>, 和 <code>complete</code> 回调选项.</p>

<h4>Ajax 事件</h4>

<p>当<code>global: true</code>时,在Ajax请求生命周期内，以下这些事件将被触发:</p>

<ol>
<li><p><code>ajaxStart</code> <i>(global)</i>: 如果没有其他Ajax请求当前活跃将会被触发</p></li>
<li><p><code>ajaxBeforeSend</code> (xhr, options): 再发送请求前，可以被取消</p></li>
<li><p><code>ajaxSend</code> (xhr, options): 像 <code>ajaxBeforeSend</code>，但不能取消</p></li>
<li><p><code>ajaxSuccess</code> (xhr, options, data): 当返回成功时</p></li>
<li><p><code>ajaxError</code> (xhr, options, error): 当有错误时</p></li>
<li><p><code>ajaxComplete</code> (xhr, options): 请求已经完成后，无论请求是成功或者失败。</p></li>
<li><p><code>ajaxStop</code> <i>(global)</i>: fired if this was the last active Ajax request</p></li>
</ol>


<p>默认情况下，Ajax事件在document对象上触发。然而，如果请求的 <code>context</code> 是一个DOM节点，
该事件会在此节点上触发然后再DOM中冒泡。唯一的例外是 <code>ajaxStart</code> &amp; <code>ajaxStop</code>这两个全局事件。</p>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;ajaxBeforeSend&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">xhr</span><span class="p">,</span> <span class="nx">options</span><span class="p">){</span>
  <span class="c1">// This gets fired for every Ajax request performed on the page.</span>
  <span class="c1">// The xhr object and $.ajax() options are available for editing.</span>
  <span class="c1">// Return false to cancel this request.</span>
<span class="p">})</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
  <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;GET&#39;</span><span class="p">,</span>
  <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;/projects&#39;</span><span class="p">,</span>
  <span class="c1">// data to be added to query string:</span>
  <span class="nx">data</span><span class="o">:</span> <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Zepto.js&#39;</span> <span class="p">},</span>
  <span class="c1">// type of data we are expecting in return:</span>
  <span class="nx">dataType</span><span class="o">:</span> <span class="s1">&#39;json&#39;</span><span class="p">,</span>
  <span class="nx">timeout</span><span class="o">:</span> <span class="mi">300</span><span class="p">,</span>
  <span class="nx">context</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">),</span>
  <span class="nx">success</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
    <span class="c1">// Supposing this JSON payload was received:</span>
    <span class="c1">//   {&quot;project&quot;: {&quot;id&quot;: 42, &quot;html&quot;: &quot;&lt;div&gt;...&quot; }}</span>
    <span class="c1">// append the HTML to context object.</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">project</span><span class="p">.</span><span class="nx">html</span><span class="p">)</span>
  <span class="p">},</span>
  <span class="nx">error</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">xhr</span><span class="p">,</span> <span class="nx">type</span><span class="p">){</span>
    <span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;Ajax error!&#39;</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">})</span>

<span class="c1">// post a JSON payload:</span>
<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
  <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;POST&#39;</span><span class="p">,</span>
  <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;/projects&#39;</span><span class="p">,</span>
  <span class="c1">// post payload:</span>
  <span class="nx">data</span><span class="o">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Zepto.js&#39;</span> <span class="p">}),</span>
  <span class="nx">contentType</span><span class="o">:</span> <span class="s1">&#39;application/json&#39;</span>
<span class="p">})</span></code></pre></div>



